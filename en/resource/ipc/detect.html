
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Detection Alarm Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-prism/prism-okaidia.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-pageview-count/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-language-picker/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-flexible-alerts/style.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="detect.html" />
    
    
    <link rel="prev" href="ptz.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Features Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../Preparation.html">
            
                <a href="../Preparation.html">
            
                    
                    Preparation for Integration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../Integrated.html">
            
                <a href="../Integrated.html">
            
                    
                    Integrate SDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../Demo.html">
            
                <a href="../Demo.html">
            
                    
                    Demo App
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../iOSAdaptation.html">
            
                <a href="../iOSAdaptation.html">
            
                    
                    iOS Adaptation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../User.html">
            
                <a href="../User.html#user-management">
            
                    
                    User Management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../User.html">
            
                <a href="../User.html#use-mobile-phone-for-login">
            
                    
                    Use Mobile Phone for Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../User.html">
            
                <a href="../User.html#use-email-for-login">
            
                    
                    Use Email for Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../User.html">
            
                <a href="../User.html#use-uid-for-login">
            
                    
                    Use UID for Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../User.html">
            
                <a href="../User.html#third-party-login">
            
                    
                    Third Party Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../User.html">
            
                <a href="../User.html#login-by-auth2">
            
                    
                    Login by Auth2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="../User.html">
            
                <a href="../User.html#anonymous-registration">
            
                    
                    Anonymous registration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="../User.html">
            
                <a href="../User.html#modify-user-info">
            
                    
                    Modify User Info
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="../User.html">
            
                <a href="../User.html#logout-disable-account">
            
                    
                    Logout, Disable Account
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9" data-path="../User.html">
            
                <a href="../User.html#user-data-model">
            
                    
                    User Data Model
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.10" data-path="../User.html">
            
                <a href="../User.html#handling-of-expired-session">
            
                    
                    Handling of Expired Session
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../HomeAbout.html">
            
                <a href="../HomeAbout.html">
            
                    
                    Home Management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../Home.html">
            
                <a href="../Home.html#home-relationship-management">
            
                    
                    Home Relationship Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../Home.html">
            
                <a href="../Home.html#home-information-management">
            
                    
                    Operation of Home
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../Home.html">
            
                <a href="../Home.html#member-management">
            
                    
                    Home Member Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../Home.html">
            
                <a href="../Home.html#room-information-management">
            
                    
                    Room Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="../Home.html">
            
                <a href="../Home.html#home-weather">
            
                    
                    Home's Weather
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../Activator.html">
            
                <a href="../Activator.html#device-configuration">
            
                    
                    Device Configuration
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../Activator.html">
            
                <a href="../Activator.html#functional-overview">
            
                    
                    Functional Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../Activator.html">
            
                <a href="../Activator.html#instructions">
            
                    
                    Instructions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../Activator.html">
            
                <a href="../Activator.html#Implementation">
            
                    
                    Implementation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.3.1" data-path="../Activator.html">
            
                <a href="../Activator.html#quick-connection-mode">
            
                    
                    Quick Connection Mode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3.2" data-path="../Activator.html">
            
                <a href="../Activator.html#hotspot-mode">
            
                    
                    HotSpot Mode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3.3" data-path="../Activator.html">
            
                <a href="../Activator.html#camera-scan-code-network-configuration">
            
                    
                    Camera Scan Code Network Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3.4" data-path="../Activator.html">
            
                <a href="../Activator.html#wired-network-configuration">
            
                    
                    Wired Network Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3.5" data-path="../Activator.html">
            
                <a href="../Activator.html#sub-device-configuration">
            
                    
                    Sub-Device Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3.6" data-path="../Activator.html">
            
                <a href="../Activator.html#bluetooth-configuration">
            
                    
                    Bluetooth Configuration
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../Device.html">
            
                <a href="../Device.html#device-management">
            
                    
                    Device Management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../Device.html">
            
                <a href="../Device.html#initialize-device">
            
                    
                    Initialize Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../Device.html">
            
                <a href="../Device.html#delegate-of-device">
            
                    
                    Delegate of Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../Device.html">
            
                <a href="../Device.html#device-control">
            
                    
                    Device Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="../Device.html">
            
                <a href="../Device.html#functions-of-device">
            
                    
                    Functions of Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="../Device.html">
            
                <a href="../Device.html#querying-device-information">
            
                    
                    Querying Device Information
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="../Device.html">
            
                <a href="../Device.html#modify-the-device-name">
            
                    
                    Modify the Device Name
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="../Device.html">
            
                <a href="../Device.html#remove-device">
            
                    
                    Remove Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.8" data-path="../Device.html">
            
                <a href="../Device.html#restore-factory-settings">
            
                    
                    Restore Factory Settings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.9" data-path="../Device.html">
            
                <a href="../Device.html#obtain-wi-fi-signal-strength">
            
                    
                    Obtain Wi-Fi Signal Strength
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.10" data-path="../Device.html">
            
                <a href="../Device.html#obtain-the-sub-device-list-of-a-gateway">
            
                    
                    Obtain the Sub-Device List of a Gateway
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.11" data-path="../Device.html">
            
                <a href="../Device.html#firmware-upgrade">
            
                    
                    Firmware Upgrade
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.12" data-path="../Device.html">
            
                <a href="../Device.html#fetch-the-log-of-dp-report">
            
                    
                    Fetch the Log of DP Report
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../MultiControl.html">
            
                <a href="../MultiControl.html#device-multi-control">
            
                    
                    Device Multi-Control
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../MultiControl.html">
            
                <a href="../MultiControl.html#overview">
            
                    
                    Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../MultiControl.html">
            
                <a href="../MultiControl.html#bussiness-flowchart">
            
                    
                    Bussiness Flowchart
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../MultiControl.html">
            
                <a href="../MultiControl.html#get-device-dp-information">
            
                    
                    Get Device Dp Information
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="../MultiControl.html">
            
                <a href="../MultiControl.html#query-related-information-of-a-dp">
            
                    
                    Query Related Information of a Dp
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="../MultiControl.html">
            
                <a href="../MultiControl.html#add-multi-control-group">
            
                    
                    Add Multi-control Group
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.6" data-path="../MultiControl.html">
            
                <a href="../MultiControl.html#update-multi-control-group">
            
                    
                    Update Multi-control Group
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.7" data-path="../MultiControl.html">
            
                <a href="../MultiControl.html#enable-or-disable-multi-control-group">
            
                    
                    Enable or Disable Multi-control Group
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.8" data-path="../MultiControl.html">
            
                <a href="../MultiControl.html#query-devices-that-support-multi-control">
            
                    
                    Query Devices that Support Multi-control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.9" data-path="../MultiControl.html">
            
                <a href="../MultiControl.html#get-affiliate-device-details">
            
                    
                    Get Affiliate Device Details
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../Share.html">
            
                <a href="../Share.html#shared-devices">
            
                    
                    Share Devices
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../Share.html">
            
                <a href="../Share.html#add-device-share">
            
                    
                    Add Device Share
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="../Share.html">
            
                <a href="../Share.html#getting-shared-relationships">
            
                    
                    Getting Shared Relationships
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="../Share.html">
            
                <a href="../Share.html#remove-sharing">
            
                    
                    Remove Sharing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.4" data-path="../Share.html">
            
                <a href="../Share.html#modify-note-name">
            
                    
                    Modify Note Name
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../Timer.html">
            
                <a href="../Timer.html">
            
                    
                    Timer Task
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../Group.html">
            
                <a href="../Group.html#group-management">
            
                    
                    Group Management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="../Group.html">
            
                <a href="../Group.html#functional-overview">
            
                    
                    Functional Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="../Group.html">
            
                <a href="../Group.html#create-group">
            
                    
                    Create Group
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.2.1" data-path="../Group.html">
            
                <a href="../Group.html#create-wi-fi-group">
            
                    
                    Create Wi-Fi Group
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2.2" data-path="../Group.html">
            
                <a href="../Group.html#create-zigbee-group">
            
                    
                    Create ZigBee Group
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13.3" data-path="../Group.html">
            
                <a href="../Group.html#group-operation">
            
                    
                    Group Operation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.3.1" data-path="../Group.html">
            
                <a href="../Group.html#instantiation">
            
                    
                    Instantiation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.3.2" data-path="../Group.html">
            
                <a href="../Group.html#modifying-group-name">
            
                    
                    Modifying group name
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.3.3" data-path="../Group.html">
            
                <a href="../Group.html#dismiss-group">
            
                    
                    Dismiss Group
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.3.4" data-path="../Group.html">
            
                <a href="../Group.html#sending-group-control-command">
            
                    
                    Sending group control command
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.3.5" data-path="../Group.html">
            
                <a href="../Group.html#group-callback-event">
            
                    
                    Group callback event
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.3.6" data-path="../Group.html">
            
                <a href="../Group.html#group-data-acquisition">
            
                    
                    Group data acquisition
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="../SmartScene.html">
            
                <a href="../SmartScene.html#smart-scene">
            
                    
                    Smart Scene
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="../SmartScene.html">
            
                <a href="../SmartScene.html#scene-condition">
            
                    
                    Scene Condition
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2" data-path="../SmartScene.html">
            
                <a href="../SmartScene.html#scene-action">
            
                    
                    Scene Action
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.3" data-path="../SmartScene.html">
            
                <a href="../SmartScene.html#smart-scene-management">
            
                    
                    Smart Scene Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.4" data-path="../SmartScene.html">
            
                <a href="../SmartScene.html#scene-operation">
            
                    
                    Scene Operation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="../Message.html">
            
                <a href="../Message.html#message-center">
            
                    
                    Message Center
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="../Message.html">
            
                <a href="../Message.html#message">
            
                    
                    Message
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="../Message.html">
            
                <a href="../Message.html#push-notification">
            
                    
                    Push Notification
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="../Feedback.html">
            
                <a href="../Feedback.html#feedback">
            
                    
                    Feedback
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="../Feedback.html">
            
                <a href="../Feedback.html#obtain-feedback-talk-list">
            
                    
                    Obtain Feedback Talk List
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2" data-path="../Feedback.html">
            
                <a href="../Feedback.html#obtain-feedback-list">
            
                    
                    Obtain Feedback List
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3" data-path="../Feedback.html">
            
                <a href="../Feedback.html#obtain-feedback-type-list">
            
                    
                    Obtain Feedback Type List
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.4" data-path="../Feedback.html">
            
                <a href="../Feedback.html#add-feedback">
            
                    
                    Add Feedback
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="../Push.html">
            
                <a href="../Push.html">
            
                    
                    Integrate Push
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../BLE.html">
            
                <a href="../BLE.html">
            
                    
                    TUYA BLE
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="../BLE.html">
            
                <a href="../BLE.html#bluetooth-low-energy">
            
                    
                    Bluetooth Low Energy
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1.1" data-path="../BLE.html">
            
                <a href="../BLE.html#preparatory-work">
            
                    
                    Preparatory Work
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.1.2" data-path="../BLE.html">
            
                <a href="../BLE.html#scanning-device">
            
                    
                    Scanning Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.1.3" data-path="../BLE.html">
            
                <a href="../BLE.html#ble-device-activation">
            
                    
                    BLE Device Activation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.1.4" data-path="../BLE.html">
            
                <a href="../BLE.html#dual-mode-device-activation">
            
                    
                    Dual-mode Device Activation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.1.5" data-path="../BLE.html">
            
                <a href="../BLE.html#ble-device-function">
            
                    
                    BLE Device Function
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.1.6" data-path="../BLE.html">
            
                <a href="../BLE.html#ble-ota">
            
                    
                    BLE OTA
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.1.7" data-path="../BLE.html">
            
                <a href="../BLE.html#error-code">
            
                    
                    Error Code
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="../SIGMesh.html">
            
                <a href="../SIGMesh.html#bluetooth-meshsig">
            
                    
                    Bluetooth Mesh(SIG)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.2.1" data-path="../SIGMesh.html">
            
                <a href="../SIGMesh.html#prepare">
            
                    
                    Prepare
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2.2" data-path="../SIGMesh.html">
            
                <a href="../SIGMesh.html#basic-notion">
            
                    
                    Basic Notion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2.3" data-path="../SIGMesh.html">
            
                <a href="../SIGMesh.html#management">
            
                    
                    Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2.4" data-path="../SIGMesh.html">
            
                <a href="../SIGMesh.html#activation">
            
                    
                    Activation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2.5" data-path="../SIGMesh.html">
            
                <a href="../SIGMesh.html#device">
            
                    
                    Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2.6" data-path="../SIGMesh.html">
            
                <a href="../SIGMesh.html#group">
            
                    
                    Group
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2.7" data-path="../SIGMesh.html">
            
                <a href="../SIGMesh.html#control">
            
                    
                    Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2.8" data-path="../SIGMesh.html">
            
                <a href="../SIGMesh.html#firmware-upgrade">
            
                    
                    Firmware Upgrade
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="../Mesh.html">
            
                <a href="../Mesh.html#bluetooth-meshtuya">
            
                    
                    Bluetooth Mesh(TUYA)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.3.1" data-path="../Mesh.html">
            
                <a href="../Mesh.html#prepare">
            
                    
                    Prepare
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3.2" data-path="../Mesh.html">
            
                <a href="../Mesh.html#basic-notion">
            
                    
                    Basic Notion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3.3" data-path="../Mesh.html">
            
                <a href="../Mesh.html#management">
            
                    
                    Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3.4" data-path="../Mesh.html">
            
                <a href="../Mesh.html#activation">
            
                    
                    Activation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3.5" data-path="../Mesh.html">
            
                <a href="../Mesh.html#device">
            
                    
                    Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3.6" data-path="../Mesh.html">
            
                <a href="../Mesh.html#group">
            
                    
                    Group
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3.7" data-path="../Mesh.html">
            
                <a href="../Mesh.html#control">
            
                    
                    Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3.8" data-path="../Mesh.html">
            
                <a href="../Mesh.html#firmware-upgrade">
            
                    
                    Firmware Upgrade
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../ExtensionAbout.html">
            
                <a href="../ExtensionAbout.html">
            
                    
                    Extension SDK
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="../Camera.html">
            
                <a href="../Camera.html">
            
                    
                    IPC SDK
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1.1" data-path="rapid_integration.html">
            
                <a href="rapid_integration.html">
            
                    
                    Integrate SDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.2" data-path="architecture.html">
            
                <a href="architecture.html">
            
                    
                    SDK Architecture
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.3" data-path="camera_device.html">
            
                <a href="camera_device.html">
            
                    
                    Camera Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.4" data-path="activitor.html">
            
                <a href="activitor.html">
            
                    
                    Device Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.5" data-path="live.html">
            
                <a href="live.html">
            
                    
                    Camera Features
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1.5.1" data-path="live.html">
            
                <a href="live.html#live-video">
            
                    
                    Live Video
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.5.2" data-path="playback.html">
            
                <a href="playback.html">
            
                    
                    Playback
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.5.3" data-path="av_function.html">
            
                <a href="av_function.html">
            
                    
                    AV Functions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.1.6" data-path="cloud_video.html">
            
                <a href="cloud_video.html">
            
                    
                    Cloud Storage
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1.6.1" data-path="cloud_video.html">
            
                <a href="cloud_video.html#flow-chart">
            
                    
                    Flow Chart
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.6.2" data-path="cloud_video.html">
            
                <a href="cloud_video.html#cloud-service">
            
                    
                    Cloud Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.6.3" data-path="cloud_video.html">
            
                <a href="cloud_video.html#cloud-video">
            
                    
                    Cloud Video
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.1.7" data-path="device_points.html">
            
                <a href="device_points.html">
            
                    
                    Extension Features
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1.7.1" data-path="device_points.html">
            
                <a href="device_points.html#data-point-id">
            
                    
                    Data Point Id
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.7.2" data-path="lowpower.html">
            
                <a href="lowpower.html">
            
                    
                    Doorbell
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.7.3" data-path="sd_card.html">
            
                <a href="sd_card.html">
            
                    
                    Memory Card
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.7.4" data-path="ptz.html">
            
                <a href="ptz.html">
            
                    
                    PTZ
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="3.1.1.8" data-path="detect.html">
            
                <a href="detect.html">
            
                    
                    Detection Alarm
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1.8.1" data-path="detect.html">
            
                <a href="detect.html#message-list">
            
                    
                    Message List
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.8.2" data-path="detect.html">
            
                <a href="detect.html#video-message">
            
                    
                    Video Message
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.1.9" data-path="encryptImage.html">
            
                <a href="encryptImage.html">
            
                    
                    Encrypted Image
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.10" data-path="timeline.html">
            
                <a href="timeline.html">
            
                    
                    Timeline View
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.11" data-path="errors.html">
            
                <a href="errors.html">
            
                    
                    Error Codes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.12" data-path="required_permission.html">
            
                <a href="required_permission.html">
            
                    
                    Permissions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.13" data-path="log_file.html">
            
                <a href="log_file.html">
            
                    
                    Debug logs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.14" data-path="FAQ.html">
            
                <a href="FAQ.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.15" data-path="version_record.html">
            
                <a href="version_record.html">
            
                    
                    Change Log
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="../Sweeper.html">
            
                <a href="../Sweeper.html#Sweeper-sdk">
            
                    
                    Sweeper SDK
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.2.1" data-path="../SweeperInterface.html">
            
                <a href="../SweeperInterface.html">
            
                    
                    Gyroscope and Visual Sweeper
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.2" data-path="../SweeperLaser.html">
            
                <a href="../SweeperLaser.html">
            
                    
                    Laser Sweeper
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.3" data-path="../SweeperVoiceDownload.html">
            
                <a href="../SweeperVoiceDownload.html">
            
                    
                    Voice Package Download
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.4" data-path="../SweeperWordIntroduction.html">
            
                <a href="../SweeperWordIntroduction.html">
            
                    
                    Glossary
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.5" data-path="../SweeperChangeLog.html">
            
                <a href="../SweeperChangeLog.html">
            
                    
                    Change Log
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="../Lock.html">
            
                <a href="../Lock.html">
            
                    
                    Smart Lock SDK
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.3.1" data-path="../WiFiLock.html">
            
                <a href="../WiFiLock.html">
            
                    
                    Wi-Fi Lock
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3.2" data-path="../BLELock.html">
            
                <a href="../BLELock.html">
            
                    
                    BLE Lock
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" >
            
                <a target="_blank" href="https://tuyainc.github.io/tuyasmart_home_ios_sdk_api_reference/index.html">
            
                    
                    API Reference
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../CommonInterface.html">
            
                <a href="../CommonInterface.html">
            
                    
                    Common Interface
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="../ErrorCode.html">
            
                <a href="../ErrorCode.html">
            
                    
                    Error Code
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="../Faq.html">
            
                <a href="../Faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="../ChangeLog.html">
            
                <a href="../ChangeLog.html">
            
                    
                    ChangeLog
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Detection Alarm</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#detection-alarm"><b>1. </b>Detection alarm</a></li><ul><li><span class="title-icon "></span><a href="#message-list"><b>1.1. </b>Message list</a></li><ul><li><span class="title-icon "></span><a href="#initialize"><b>1.1.1. </b>Initialize</a></li><li><span class="title-icon "></span><a href="#message-calendar"><b>1.1.2. </b>Message calendar</a></li><li><span class="title-icon "></span><a href="#message-type"><b>1.1.3. </b>Message type</a></li><li><span class="title-icon "></span><a href="#message-list_1"><b>1.1.4. </b>Message list</a></li><li><span class="title-icon "></span><a href="#encrypted-image"><b>1.1.5. </b>Encrypted image</a></li></ul><li><span class="title-icon "></span><a href="#video-message"><b>1.2. </b>Video message</a></li><ul><li><span class="title-icon "></span><a href="#alarm-message-and-playback"><b>1.2.1. </b>Alarm message and playback</a></li></ul></ul></ul></div><h1 id="detection-alarm"><a name="detection-alarm" class="anchor-navigation-ex-anchor" href="#detection-alarm"><i class="fa fa-link" aria-hidden="true"></i></a>1. Detection alarm</h1>
<p>Tuya smart camera usually has the ability of detecting alarm. There are two main types of alarm detection, sound detection and motion detection. When the device detects a sound or object moving, it sends a warning message, and if your App is integrated with push, it will also receive a push notification.  Integrate push refer to<a href="https://tuyainc.github.io/tuyasmart_home_ios_sdk_doc/en/resource/Push.html" target="_blank"> Integrate push</a>.</p>
<p>The alarm message usually comes with a screenshot of the current video.</p>
<p>Direct-powered doorbell equipment, has ability to provide video messages. When someone rings the doorbell, the device can upload a video message, which is also picked up by an alarm message with a six-second encrypted video.</p>
<h2 id="message-list"><a name="message-list" class="anchor-navigation-ex-anchor" href="#message-list"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. Message list</h2>
<p><strong>Class</strong></p>
<table>
<thead>
<tr>
<th>Class</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>TuyaSmartCameraMessage</td>
<td>Camera detection alarm event message management</td>
</tr>
</tbody>
</table>
<h3 id="initialize"><a name="initialize" class="anchor-navigation-ex-anchor" href="#initialize"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.1. Initialize</h3>
<p>Before getting the list of messages, you need to initialize the message manager with the device id and time zone.</p>
<p><strong>Declaration</strong></p>
<p>Initilize message manager.</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span>instancetype<span class="token punctuation">)</span>initWithDeviceId<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>devId timeZone<span class="token punctuation">:</span><span class="token punctuation">(</span>NSTimeZone <span class="token operator">*</span><span class="token punctuation">)</span>timeZone<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>devId</td>
<td>Deivce id of camera</td>
</tr>
<tr>
<td>timeZone</td>
<td>Time zone, default is <code>[NSTimeZone systemTimeZone]</code></td>
</tr>
</tbody>
</table>
<h3 id="message-calendar"><a name="message-calendar" class="anchor-navigation-ex-anchor" href="#message-calendar"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.2. Message calendar</h3>
<p>You can use the SDK to look up the date of the alarm message in a certain year and a certain month, so that it can be displayed visually on the calendar.</p>
<p><strong>Declaration</strong></p>
<p>Gets the date on which the message was logged.</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>messageDaysForYear<span class="token punctuation">:</span><span class="token punctuation">(</span>NSInteger<span class="token punctuation">)</span>year
                     month<span class="token punctuation">:</span><span class="token punctuation">(</span>NSInteger<span class="token punctuation">)</span>month
                   success<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span>NSArray<span class="token operator">&lt;</span>NSString <span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token operator">*</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span>success
                   failure<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>year</td>
<td>Year&#xFF0C;ex: 2020</td>
</tr>
<tr>
<td>month</td>
<td>Month, ex: 2</td>
</tr>
<tr>
<td>success</td>
<td>Success callback, return the days of the month which has messages</td>
</tr>
<tr>
<td>failure</td>
<td>Failure callback, error indicates an error message</td>
</tr>
</tbody>
</table>
<blockquote>
<p> The <code>result</code> is an array, elements is string. ex: [&quot;01&quot;, &quot;11&quot;, &quot;30&quot;].</p>
</blockquote>
<h3 id="message-type"><a name="message-type" class="anchor-navigation-ex-anchor" href="#message-type"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.3. Message type</h3>
<p>There are many types of detection alarm messages according to the trigger mode, some of which can be divided into a large category. The SDK provides a list to get the default categories for sorting the query alarm messages.</p>
<p><strong>Declaration</strong></p>
<p>Get the list of message categories.</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>getMessageSchemes<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span>NSArray<span class="token operator">&lt;</span>TuyaSmartCameraMessageSchemeModel <span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token operator">*</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span>success
                  failure<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>success</td>
<td>Success callback, return message category models</td>
</tr>
<tr>
<td>failure</td>
<td>Failure callback, error indicates an error message</td>
</tr>
</tbody>
</table>
<p><strong>TuyaSmartCameraMessageSchemeModel</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>describe</td>
<td>NSString</td>
<td>Message category description</td>
</tr>
<tr>
<td>msgCodes</td>
<td>NSArray</td>
<td>Message types that the message category contains</td>
</tr>
</tbody>
</table>
<blockquote>
<p>When getting a list of messages, the value of the <code>msgCodes</code> attribute of the message category can be passed in to get all types of alarm messages that this category contains.</p>
</blockquote>
<p>The message type represents the trigger form of the alarm message, which is reflected in the code as the <code>msgCode</code> attribute of the alarm message data model.</p>
<p><strong>Message Type</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ipc_motion</td>
<td>Motion detecting</td>
</tr>
<tr>
<td>ipc_doorbell</td>
<td>Doorbell ring</td>
</tr>
<tr>
<td>ipc_dev_link</td>
<td>Devices linkage</td>
</tr>
<tr>
<td>ipc_passby</td>
<td>Someone passby</td>
</tr>
<tr>
<td>ipc_linger</td>
<td>Someone linger</td>
</tr>
<tr>
<td>ipc_leave_msg</td>
<td>Doorbell message</td>
</tr>
<tr>
<td>ipc_connected</td>
<td>Doorbell ring has answered</td>
</tr>
<tr>
<td>ipc_unconnected</td>
<td>Doorbell not answered</td>
</tr>
<tr>
<td>ipc_refuse</td>
<td>Doorbell resisted</td>
</tr>
<tr>
<td>ipc_human</td>
<td>Human detection</td>
</tr>
<tr>
<td>ipc_cat</td>
<td>Pet detection</td>
</tr>
<tr>
<td>ipc_car</td>
<td>Car detection</td>
</tr>
<tr>
<td>ipc_baby_cry</td>
<td>Baby cry</td>
</tr>
<tr>
<td>ipc_bang</td>
<td>Abnormal sound</td>
</tr>
<tr>
<td>ipc_face</td>
<td>Face detection</td>
</tr>
<tr>
<td>ipc_antibreak</td>
<td>Forced demolition alarm</td>
</tr>
<tr>
<td>ipc_low_battery</td>
<td>Low power alarm</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Depending on the device&apos;s capabilities, the types of messages that can be triggered can vary. </p>
</blockquote>
<h3 id="message-list_1"><a name="message-list_1" class="anchor-navigation-ex-anchor" href="#message-list_1"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.4. Message list</h3>
<p><strong>Declaration</strong></p>
<p>Get message list.</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>messagesWithMessageCodes<span class="token punctuation">:</span><span class="token punctuation">(</span>NSArray <span class="token operator">*</span><span class="token punctuation">)</span>msgCodes
                          Offset<span class="token punctuation">:</span><span class="token punctuation">(</span>NSInteger<span class="token punctuation">)</span>offset
                           limit<span class="token punctuation">:</span><span class="token punctuation">(</span>NSInteger<span class="token punctuation">)</span>limit
                       startTime<span class="token punctuation">:</span><span class="token punctuation">(</span>NSInteger<span class="token punctuation">)</span>startTime
                         endTime<span class="token punctuation">:</span><span class="token punctuation">(</span>NSInteger<span class="token punctuation">)</span>endTime
                         success<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span>NSArray<span class="token operator">&lt;</span>TuyaSmartCameraMessageModel <span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token operator">*</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span>success
                         failure<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>msgCodes</td>
<td>Array of message types, pass nil to get all types of messages</td>
</tr>
<tr>
<td>offset</td>
<td>Offset, 0 means starting with the first alarm message</td>
</tr>
<tr>
<td>limit</td>
<td>Page size with a maximum of 200</td>
</tr>
<tr>
<td>startTime</td>
<td>Gets messages that is reported no earlier than startTime</td>
</tr>
<tr>
<td>endTime</td>
<td>Gets messages that is reported no later than endTime</td>
</tr>
<tr>
<td>success</td>
<td>Success callback, return message data models array</td>
</tr>
<tr>
<td>failure</td>
<td>Failure callback, error indicates an error message</td>
</tr>
</tbody>
</table>
<p><strong>Declaration</strong></p>
<p>Batch delete alarm message.</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>removeMessagesWithMessageIds<span class="token punctuation">:</span><span class="token punctuation">(</span>NSArray <span class="token operator">*</span><span class="token punctuation">)</span>msgIds
                             success<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">)</span>success
                             failure<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>msgIds</td>
<td>Message ids to be deleted</td>
</tr>
<tr>
<td>success</td>
<td>Success callback</td>
</tr>
<tr>
<td>failure</td>
<td>Failure callback, error indicates an error message</td>
</tr>
</tbody>
</table>
<p><strong>TuyaSmartCameraMessageModel</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>dateTime</td>
<td>NSString</td>
<td>Formatted string of date</td>
</tr>
<tr>
<td>msgTypeContent</td>
<td>NSString</td>
<td>Message type description</td>
</tr>
<tr>
<td>attachPic</td>
<td>NSString</td>
<td>Url of picture attachment</td>
</tr>
<tr>
<td>attachVideos</td>
<td>NSArray</td>
<td>Urls of video attachments</td>
</tr>
<tr>
<td>msgSrcId</td>
<td>NSString</td>
<td>Deivice id of which report the message</td>
</tr>
<tr>
<td>msgContent</td>
<td>NSString</td>
<td>Message content</td>
</tr>
<tr>
<td>msgTitle</td>
<td>NSString</td>
<td>Message title</td>
</tr>
<tr>
<td>msgId</td>
<td>NSString</td>
<td>Message id</td>
</tr>
<tr>
<td>msgCode</td>
<td>NSString</td>
<td>Message type</td>
</tr>
<tr>
<td>time</td>
<td>NSInteger</td>
<td>Unix timestamp of message report time</td>
</tr>
</tbody>
</table>
<p>Depending on the message type, there may be different attachments. The <code>attachPic</code> property gets the url of the image attachment, and the <code>attachVideos</code> property gets the urls of the video attachments. Normally, this property has only one element.</p>
<h3 id="encrypted-image"><a name="encrypted-image" class="anchor-navigation-ex-anchor" href="#encrypted-image"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.5. Encrypted image</h3>
<p>In order to ensure the privacy and security of data, you can choose to use encrypted picture messages.</p>
<p><strong>Declaration</strong></p>
<p>Enable image encryption, the default is off. After opening, the pictures carried in the message will be encrypted, you need to use the <code>TYEncryptImage</code> component to display the pictures, refer to <a href="encryptImage.html">Encrypt Image</a>.</p>
<pre class="language-"><code class="lang-objc"><span class="token keyword">@property</span> <span class="token punctuation">(</span>nonatomic<span class="token punctuation">,</span> assign<span class="token punctuation">)</span> BOOL enableEncryptedImage<span class="token punctuation">;</span>
</code></pre>
<h2 id="video-message"><a name="video-message" class="anchor-navigation-ex-anchor" href="#video-message"><i class="fa fa-link" aria-hidden="true"></i></a>1.2. Video message</h2>
<p>The video attachment in the video message is the encrypted video, which needs to be played through the interface provided by <code>TuyaSmartCameraKit/TuyaSmartCameraMessageMediaPlayer</code>.</p>
<p><strong>Declaration</strong></p>
<p>Get video view</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span>UIView<span class="token operator">&lt;</span>TuyaSmartVideoViewType<span class="token operator">&gt;</span> <span class="token operator">*</span><span class="token punctuation">)</span>videoView<span class="token punctuation">;</span>
</code></pre>
<p><strong>Declaration</strong></p>
<p>Play attachments in alarm messages</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>playMessage<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaSmartCameraMessageModel <span class="token operator">*</span><span class="token punctuation">)</span>messageModel attachmentType<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaCameraMessageAttachmentType<span class="token punctuation">)</span>attachmentType success<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">)</span>success failure<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span> errCode<span class="token punctuation">)</span><span class="token punctuation">)</span>failure finished<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span> errCode<span class="token punctuation">)</span><span class="token punctuation">)</span>onFinish<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>messageModel</td>
<td>Detect message mode</td>
</tr>
<tr>
<td>attachmentType</td>
<td>The type of attachment that needs to be played. The warning message may include video messages and audio messages</td>
</tr>
<tr>
<td>success</td>
<td>Success callback</td>
</tr>
<tr>
<td>failure</td>
<td>Failure callback</td>
</tr>
<tr>
<td>onFinish</td>
<td>Finished callback, errCode indicates the error code, 0 means the end of normal playback</td>
</tr>
</tbody>
</table>
<p><strong>Declaration</strong></p>
<p>Play attachment in alarm message</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>playMessageAttachment<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>attachmentPath type<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaCameraMessageAttachmentType<span class="token punctuation">)</span>attachmentType success<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">)</span>success failure<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span> errCode<span class="token punctuation">)</span><span class="token punctuation">)</span>failure finished<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span> errCode<span class="token punctuation">)</span><span class="token punctuation">)</span>onFinish<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>attachmentPath</td>
<td>The url of the attachment</td>
</tr>
<tr>
<td>attachmentType</td>
<td>The type of the attachment</td>
</tr>
<tr>
<td>success</td>
<td>Success callback</td>
</tr>
<tr>
<td>failure</td>
<td>Failure callback</td>
</tr>
<tr>
<td>onFinish</td>
<td>Finished callback, errCode indicates the error code, 0 means the end of normal playback</td>
</tr>
</tbody>
</table>
<p><strong>Declaration</strong></p>
<p>Pause playing</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>pausePlay<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaCameraMessageAttachmentType<span class="token punctuation">)</span>attachmentType<span class="token punctuation">;</span>
</code></pre>
<p><strong>Declaration</strong></p>
<p>Resume playing.</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>resumePlay<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaCameraMessageAttachmentType<span class="token punctuation">)</span>attachmentType<span class="token punctuation">;</span>
</code></pre>
<p><strong>Declaration</strong></p>
<p>Stop playing.</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>stopPlay<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaCameraMessageAttachmentType<span class="token punctuation">)</span>attachmentType<span class="token punctuation">;</span>
</code></pre>
<p><strong>Declaration</strong></p>
<p>Mute enable</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>enableMute<span class="token punctuation">:</span><span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>mute success<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">)</span>success failure<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span> error<span class="token punctuation">)</span><span class="token punctuation">)</span>failure<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>mute</td>
<td>Whether to mute</td>
</tr>
<tr>
<td>success</td>
<td>Success callback</td>
</tr>
<tr>
<td>failure</td>
<td>Failure callback</td>
</tr>
</tbody>
</table>
<p><strong>Return</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>int</td>
<td>Error code, indicating the reason for the failure, 0 indicates succeed</td>
</tr>
</tbody>
</table>
<p><strong>TuyaSmartCameraMessageMediaPlayerDelegate</strong></p>
<p>Message media player delegate protocol.</p>
<p><strong>Declaration</strong></p>
<p>Video frame data callback</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>mediaPlayer<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaSmartCameraMessageMediaPlayer <span class="token operator">*</span><span class="token punctuation">)</span>player didReceivedFrame<span class="token punctuation">:</span><span class="token punctuation">(</span>CMSampleBufferRef<span class="token punctuation">)</span>frameBuffer videoFrameInfo<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaSmartVideoFrameInfo<span class="token punctuation">)</span>frameInfo<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>player</td>
<td>Media player object</td>
</tr>
<tr>
<td>frameBuffer</td>
<td>Video frame YUV data</td>
</tr>
<tr>
<td>frameInfo</td>
<td>Video frame info</td>
</tr>
<tr>
<td>frameInfo.nDuration</td>
<td>Video total time</td>
</tr>
<tr>
<td>frameInfo.nProgress</td>
<td>Video play progress</td>
</tr>
</tbody>
</table>
<p><strong>Declaration</strong></p>
<p>Audio frame data callback</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>mediaPlayer<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaSmartCameraMessageMediaPlayer <span class="token operator">*</span><span class="token punctuation">)</span>player  didReceivedAudioFrameInfo<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaSmartAudioFrameInfo<span class="token punctuation">)</span>frameInfo<span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>player</td>
<td>Media player object</td>
</tr>
<tr>
<td>frameInfo</td>
<td>Audio frame info</td>
</tr>
<tr>
<td>frameInfo.nDuration</td>
<td>Audio total time</td>
</tr>
<tr>
<td>frameInfo.nProgress</td>
<td>Audio play progress</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Before version 3.20.0, use the interface in <code>TuyaSmartCloudManager</code> to play the attachments in the warning message. Version 3.20.0 has been deprecated, please modify it as soon as possible.</p>
</blockquote>
<h3 id="alarm-message-and-playback"><a name="alarm-message-and-playback" class="anchor-navigation-ex-anchor" href="#alarm-message-and-playback"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.1. Alarm message and playback</h3>
<p>There is no direct correlation between the alarm message and the record videos in memory card, the only correlation is that in the memory card event recording mode, the trigger reason and time point of the alarm message and record video are the same.</p>
<p>The alarm message is saved in the Tuya cloud, and the video recording of the memory card is saved in the camera&apos;s memory card, and the video in the memory card may be overwritten when the capacity is insufficient. The switch recorded by the memory card is not related to the switch that detects the alarm, so even in the mode of recording the memory card event, the alarm message and the video recording in the memory card are not one-to-one.</p>
<p>However, if there is a video recording at the time when the alarm message occurs, the SDK does not provide an interface for such correlation search. The developer can establish the correlation by searching whether there is a corresponding video recording in the video clip of the memory card on the same day by the trigger time of the alarm message.</p>
<p><strong>Example</strong></p>
<p>ObjC</p>
<pre class="language-"><code class="lang-objc"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>enableDetect <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>dpManager isSupportDP<span class="token punctuation">:</span>TuyaSmartCameraMotionDetectDPName<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        bool motionDetectOn <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>dpManager valueForDP<span class="token punctuation">:</span>TuyaSmartCameraMotionDetectDPName<span class="token punctuation">]</span> tysdk_toBool<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>motionDetectOn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>dpManager setValue<span class="token punctuation">:</span><span class="token operator">@</span><span class="token punctuation">(</span>YES<span class="token punctuation">)</span> 
                                                  forDP<span class="token punctuation">:</span>TuyaSmartCameraMotionDetectDPName 
                                              success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>id result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// Enable motion detection successfully</span>
            <span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                <span class="token comment">// Network error</span>
            <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
          <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>dpManager setValue<span class="token punctuation">:</span>TuyaSmartCameraMotionHigh
                              forDP<span class="token punctuation">:</span>TuyaSmartCameraMotionSensitivityDPName
                         success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>id result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Successfully set the motion detection sensitivity to high sensitivity</span>
        <span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Network error</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>viewDidLoad <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token keyword">super</span> viewDidLoad<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">self</span><span class="token punctuation">.</span>cameraMessage <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>TuyaSmartCameraMessage alloc<span class="token punctuation">]</span> initWithDeviceId<span class="token punctuation">:</span><span class="token keyword">self</span><span class="token punctuation">.</span>devId timeZone<span class="token punctuation">:</span><span class="token punctuation">[</span>NSTimeZone defaultTimeZone<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>cameraMessage getMessageSchemes<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSArray<span class="token operator">&lt;</span>TuyaSmartCameraMessageSchemeModel <span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token operator">*</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// Message category models</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>schemeModels <span class="token operator">=</span> result<span class="token punctuation">;</span>
                <span class="token comment">// Get messages of the first category</span>
        <span class="token punctuation">[</span><span class="token keyword">self</span> reloadMessageListWithScheme<span class="token punctuation">:</span>result<span class="token punctuation">.</span>firstObject<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Network error</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>reloadMessageListWithScheme<span class="token punctuation">:</span><span class="token punctuation">(</span>TuyaSmartCameraMessageSchemeModel <span class="token operator">*</span><span class="token punctuation">)</span>schemeModel <span class="token punctuation">{</span>
    NSDateFormatter <span class="token operator">*</span>formatter <span class="token operator">=</span> <span class="token punctuation">[</span>NSDateFormatter new<span class="token punctuation">]</span><span class="token punctuation">;</span>
    formatter<span class="token punctuation">.</span>dateFormat <span class="token operator">=</span> <span class="token string">@&quot;yyyy-MM-dd&quot;</span><span class="token punctuation">;</span>
    NSDate <span class="token operator">*</span>date <span class="token operator">=</span> <span class="token punctuation">[</span>formatter dateFromString<span class="token punctuation">:</span><span class="token string">@&quot;2020-02-17&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token comment">// Get the top 20 alarm messages from zero on February 17, 2020 to the present</span>
    <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>cameraMessage messagesWithMessageCodes<span class="token punctuation">:</span>schemeModel<span class="token punctuation">.</span>msgCodes Offset<span class="token punctuation">:</span><span class="token number">0</span> limit<span class="token punctuation">:</span><span class="token number">20</span> startTime<span class="token punctuation">:</span><span class="token punctuation">[</span>date timeIntervalSince1970<span class="token punctuation">]</span> endTime<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span>NSDate new<span class="token punctuation">]</span> timeIntervalSince1970<span class="token punctuation">]</span> success<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSArray<span class="token operator">&lt;</span>TuyaSmartCameraMessageModel <span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token operator">*</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>messageModelList <span class="token operator">=</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> failure<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Network error</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Swift</p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">func</span> <span class="token function">enableDectect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">guard</span> <span class="token keyword">self</span><span class="token punctuation">.</span>dpManager<span class="token punctuation">.</span><span class="token function">isSupportDP</span><span class="token punctuation">(</span><span class="token punctuation">.</span>motionDetectDPName<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token keyword">let</span> isMontionDetectOn <span class="token operator">=</span> <span class="token keyword">self</span><span class="token punctuation">.</span>dpManager<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span>forDP<span class="token punctuation">:</span> <span class="token punctuation">.</span>motionDetectDPName<span class="token punctuation">)</span> <span class="token keyword">as</span><span class="token operator">?</span> <span class="token builtin">Bool</span><span class="token punctuation">,</span> <span class="token operator">!</span>isMontionDetectOn <span class="token punctuation">{</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>dpManager<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> forDP<span class="token punctuation">:</span> <span class="token punctuation">.</span>motionDetectDPName<span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token number">_</span> <span class="token keyword">in</span>
            <span class="token comment">// Enable motion detection successfully</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token number">_</span> <span class="token keyword">in</span>
            <span class="token comment">// Network error</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">self</span><span class="token punctuation">.</span>dpManager<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token builtin">TuyaSmartCameraMotion</span><span class="token punctuation">.</span>high<span class="token punctuation">,</span> forDP<span class="token punctuation">:</span> <span class="token punctuation">.</span>motionSensitivityDPName<span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token number">_</span> <span class="token keyword">in</span>
        <span class="token comment">// Successfully set the motion detection sensitivity to high sensitivity</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token number">_</span> <span class="token keyword">in</span>
        <span class="token comment">// Network error</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function">viewDidLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">viewDidLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">self</span><span class="token punctuation">.</span>cameraMessage <span class="token operator">=</span> <span class="token function">TuyaSmartCameraMessage</span><span class="token punctuation">(</span>deviceId<span class="token punctuation">:</span> <span class="token keyword">self</span><span class="token punctuation">.</span>devId<span class="token punctuation">,</span> timeZone<span class="token punctuation">:</span> <span class="token builtin">NSTimeZone</span><span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">)</span>
    <span class="token keyword">self</span><span class="token punctuation">.</span>cameraMessage<span class="token punctuation">.</span><span class="token function">getSchemes</span><span class="token punctuation">(</span><span class="token punctuation">{</span> result <span class="token keyword">in</span>
                <span class="token comment">// Get messages of the first category</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>schemeModels <span class="token operator">=</span> result
        <span class="token keyword">if</span> <span class="token keyword">let</span> schemeModel <span class="token operator">=</span> result<span class="token operator">?</span><span class="token punctuation">.</span><span class="token builtin">first</span> <span class="token punctuation">{</span>
            <span class="token function">reloadMessage</span><span class="token punctuation">(</span>schemeModel<span class="token punctuation">:</span> schemeModel<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token number">_</span> <span class="token keyword">in</span>
        <span class="token comment">// Network error</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">reloadMessage</span><span class="token punctuation">(</span>schemeModel<span class="token punctuation">:</span> <span class="token builtin">TuyaSmartCameraMessageSchemeModel</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> formatter <span class="token operator">=</span> <span class="token function">DateFormatter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    formatter<span class="token punctuation">.</span>dateFormat <span class="token operator">=</span> <span class="token string">&quot;yyyy-MM-dd&quot;</span>
    <span class="token keyword">let</span> date <span class="token operator">=</span> formatter<span class="token punctuation">.</span><span class="token function">date</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> <span class="token string">&quot;2020-02-17&quot;</span><span class="token punctuation">)</span>
      <span class="token comment">// Get the top 20 alarm messages from zero on February 17, 2020 to the present</span>
    <span class="token keyword">self</span><span class="token punctuation">.</span>cameraMessage<span class="token punctuation">.</span><span class="token function">messages</span><span class="token punctuation">(</span>withMessageCodes<span class="token punctuation">:</span> schemeModel<span class="token punctuation">.</span>msgCodes<span class="token punctuation">,</span> offset<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> limit<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span> startTime<span class="token punctuation">:</span> <span class="token function">Int</span><span class="token punctuation">(</span>date<span class="token operator">!</span><span class="token punctuation">.</span>timeIntervalSince1970<span class="token punctuation">)</span><span class="token punctuation">,</span> endTime<span class="token punctuation">:</span> <span class="token function">Int</span><span class="token punctuation">(</span><span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>timeIntervalSince1970<span class="token punctuation">)</span><span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token punctuation">{</span> result <span class="token keyword">in</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>messageModelList <span class="token operator">=</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token number">_</span> <span class="token keyword">in</span>
        <span class="token comment">// Network error</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="ptz.html" class="navigation navigation-prev " aria-label="Previous page: PTZ">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="detect.html#message-list" class="navigation navigation-next " aria-label="Next page: Message List">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Detection Alarm","level":"3.1.1.8","depth":3,"next":{"title":"Message List","level":"3.1.1.8.1","depth":4,"anchor":"#message-list","path":"resource/ipc/detect.md","ref":"./resource/ipc/detect.md#message-list","articles":[]},"previous":{"title":"PTZ","level":"3.1.1.7.4","depth":4,"path":"resource/ipc/ptz.md","ref":"./resource/ipc/ptz.md","articles":[]},"dir":"ltr"},"config":{"plugins":["js-sequence-diagram-full@>=0.3.1","prism","-highlight","anchors","splitter","github","anchor-navigation-ex","ga","expandable-chapters-small","pageview-count","language-picker","hide-element","flexible-alerts"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{"css":["prismjs/themes/prism-okaidia.css"],"lang":{"oc":"objectivec","objc":"objectivec","objective-c":"objectivec"},"ignore":["sequence"]},"language-picker":{"grid-columns":3},"github":{"url":"https://github.com/TuyaInc/tuyasmart_home_ios_sdk"},"splitter":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"js-sequence-diagram-full":{},"hide-element":{"elements":[".gitbook-link"]},"fontsettings":{"theme":"white","family":"sans","size":2},"anchor-navigation-ex":{"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showGoTop":false,"showLevel":true},"pageview-count":{},"expandable-chapters-small":{},"flexible-alerts":{"danger":{"className":"danger","icon":"fa fa-ban","label":{"zh-hans":"æ³¨æ","en":"Attention"}},"note":{"className":"info","icon":"fa fa-info-circle","label":{"zh-hans":"æç¤º","en":"Note"}},"style":"flat","tip":{"className":"tip","icon":"fa fa-lightbulb-o","label":{"zh-hans":"Tips","en":"Tip"}},"warning":{"className":"warning","icon":"fa fa-exclamation-triangle","label":{"zh-hans":"è­¦å","en":"Warning"}}},"ga":{"configuration":"auto","token":"UA-165828612-1"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"en","gitbook":"*"},"file":{"path":"resource/ipc/detect.md","mtime":"2021-01-09T03:40:25.021Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-01-09T03:41:24.778Z"},"basePath":"../..","book":{"language":"en"}});
        });
    </script>
</div>

        
    <script src="../../../gitbook/gitbook.js"></script>
    <script src="../../../gitbook/theme.js"></script>
    
        
        <script src="../../../gitbook/gitbook-plugin-js-sequence-diagram-full/sequence-diagram-min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-js-sequence-diagram-full/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-pageview-count/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-language-picker/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-hide-element/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-flexible-alerts/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

